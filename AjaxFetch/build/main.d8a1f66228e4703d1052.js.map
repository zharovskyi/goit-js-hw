{"version":3,"sources":["webpack:///./template/post.hbs","webpack:///./index.js"],"names":["Handlebars","__webpack_require__","module","exports","template","compiler","main","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","helperMissing","alias4","escapeExpression","title","call","name","hash","text","id","useData","r","__webpack_exports__","_template_post_hbs__WEBPACK_IMPORTED_MODULE_1__","_template_post_hbs__WEBPACK_IMPORTED_MODULE_1___default","n","baseUrl2","postData","post","refs","form","document","querySelector","postsList","getPosts","fetch","then","res","json","console","log","this","posts","render","createPost","headers","content-type","method","body","JSON","stringify","push","insertAdjacentHTML","postTemplate","markup","map","el","join","addEventListener","e","preventDefault","currentTarget","elements","submData","value","target","nodeName","dataset","closest","remove"],"mappings":"8EAAA,IAAAA,EAAiBC,EAAQ,QAEzBC,EAAAC,SAAAH,EAAA,SAAAA,GAAAI,SAAA,CAAiEC,SAAA,eAAAC,KAAA,SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GACjE,IAAAC,EAAAC,EAAA,MAAAL,IAAAD,EAAAO,aAAA,GAA6EC,EAAAN,EAAAO,cAAAC,EAAAV,EAAAW,iBAE7E,wCACAD,EAH6E,mBAG7EL,EAAA,OAAAA,EAAAH,EAAAU,QAAA,MAAAX,IAAAW,MAAAX,IAAAI,EAAAG,GAAAH,EAAAQ,KAAAP,EAAA,CAAwKQ,KAAA,QAAAC,KAAA,GAAwBX,SAAaC,GAC7M,cACAK,EAL6E,mBAK7EL,EAAA,OAAAA,EAAAH,EAAAc,OAAA,MAAAf,IAAAe,KAAAf,IAAAI,EAAAG,GAAAH,EAAAQ,KAAAP,EAAA,CAAsKQ,KAAA,OAAAC,KAAA,GAAuBX,SAAaC,GAC1M,2BACAK,EAP6E,mBAO7EL,EAAA,OAAAA,EAAAH,EAAAe,KAAA,MAAAhB,IAAAgB,GAAAhB,IAAAI,EAAAG,GAAAH,EAAAQ,KAAAP,EAAA,CAAkKQ,KAAA,KAAAC,KAAA,GAAqBX,SAAaC,GACpM,sCACCa,SAAA,8DCZDxB,EAAAyB,EAAAC,GAAA1B,EAAA,YAAA2B,EAAA3B,EAAA,QAAA4B,EAAA5B,EAAA6B,EAAAF,GA4BI,MAAMG,EAAW,wBACXC,EAAW,CAChBC,KAAM,GACNC,KAAM,CACJC,KAAMC,SAASC,cAAc,SAC7BC,UAAWF,SAASC,cAAc,WAEpCE,WACEC,SAAST,WACNU,KAAKC,GAAOA,EAAIC,QAChBF,KAAK9B,IACJiC,QAAQC,IAAI,SAAUlC,GACtBmC,KAAKC,MAAQpC,EACbmC,KAAKE,YAGXC,WAAWtC,GACT6B,SAAST,UAAkB,CACzBmB,QAAS,CACPC,eAAgB,oBAElBC,OAAQ,OACRC,KAAMC,KAAKC,UAAU5C,KAEpB8B,KAAKC,GAAOA,EAAIC,QAChBF,KAAK9B,IACJmC,KAAKC,MAAMS,KAAK7C,GAChBiC,QAAQC,IAAI,SAAUlC,GACtBmC,KAAKZ,KAAKI,UAAUmB,mBAAmB,YAAaC,IAAa/C,OAGvEqC,SACE,MAAMW,EACJb,KAAKC,MAAMa,IAAIC,GAAMH,IAAaG,IAAKC,KAAK,IAC9ChB,KAAKZ,KAAKI,UAAUmB,mBAAmB,YAAaE,KAGvD3B,EAASE,KAAKC,KAAK4B,iBAAiB,SAAU,SAAUC,GACvDA,EAAEC,iBACFrB,QAAQC,IAAI,mCAAoCmB,EAAEE,cAAcC,SAAShD,OACzE,MAAMiD,EAAW,CACfjD,MAAO6C,EAAEE,cAAcC,SAAShD,MAAMkD,MACtC9C,KAAMyC,EAAEE,cAAcC,SAAS5C,KAAK8C,OAEtCrC,EAASiB,WAAWmB,KAErBpC,EAASO,WAITP,EAASE,KAAKI,UAAUyB,iBAAiB,QAAQ,SAASC,GACtD,GAAyB,WAAtBA,EAAEM,OAAOC,SAAuB,CAC/B,MAAM/C,EAAKwC,EAAEM,OAAOE,QAAQhD,GAE5BgB,SAAST,WAAkBP,IAAK,CAC5B4B,OAAQ,WACTX,KAAKC,GAAOA,EAAIC,QAClBF,KAAK9B,GAAQiC,QAAQC,IAAIlC,IACzB8B,KAAK,KACFuB,EAAEM,OAAOG,QAAQ,gBAAgBC","file":"main.d8a1f66228e4703d1052.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"posts__item\\\">\\n <h3>\"\n    + alias4(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</h3>\\n <p>\"\n    + alias4(((helper = (helper = helpers.text || (depth0 != null ? depth0.text : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"text\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</p>\\n <button data-id=\\\"\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">delete</button>\\n</li>\\n    \\n  \";\n},\"useData\":true});","import './styles.css';\nimport postTemplate from './template/post.hbs'\n\n// const baseUrl = 'https://swapi.co/api';\n\n// let appData = {\n//     planets: [],\n//     getPlanets() {\n//         return this.planets\n//     },\n//     renderPlanets(){\n//         const template =this.planets.map(el => planetsTemplate(el).join());\n//         // this.refs.ul.insertA\n//         }\n// };\n\n// fetch(`${baseUrl}/planets/?page=1`)\n//     .then((response) => response.json())\n//     .then(data => {  \n//         appData.planets = data.results;\n//         console.log(appData.getPlanets());\n//         planetsTemplate(appData.planets[0]);\n//     });\n\n\n\n    // Postd\n\n    const baseUrl2 = 'http://localhost:3000';\n    const postData = {\n     post: [],\n     refs: {\n       form: document.querySelector('.form'),\n       postsList: document.querySelector('.posts')\n     },\n     getPosts() {\n       fetch(`${baseUrl2}/posts`)\n         .then(res => res.json())\n         .then(data => {\n           console.log('data :', data)\n           this.posts = data;\n           this.render();\n         });\n     },\n     createPost(data) {\n       fetch(`${baseUrl2}/posts`, {\n         headers: {\n           \"content-type\": \"application/json\"\n         },\n         method: \"POST\",\n         body: JSON.stringify(data),\n       })\n         .then(res => res.json())\n         .then(data => {\n           this.posts.push(data);\n           console.log('data :', data);\n           this.refs.postsList.insertAdjacentHTML('beforeend', postTemplate(data));\n         })\n     },\n     render() {\n       const markup =\n         this.posts.map(el => postTemplate(el)).join('');\n       this.refs.postsList.insertAdjacentHTML('beforeend', markup);\n     }\n    }\n    postData.refs.form.addEventListener('submit', function (e) {\n     e.preventDefault();\n     console.log('e.currentTarget.elements.title :', e.currentTarget.elements.title);\n     const submData = {\n       title: e.currentTarget.elements.title.value,\n       text: e.currentTarget.elements.text.value,\n     };\n     postData.createPost(submData);\n    })\n    postData.getPosts();\n\n    // delete\n\n    postData.refs.postsList.addEventListener('click',function(e){\n        if(e.target.nodeName === 'BUTTON') {\n            const id = e.target.dataset.id;\n\n            fetch(`${baseUrl2}/posts/${id}`,{\n                method: 'DELETE',\n            }).then(res => res.json())\n            .then(data => console.log(data))\n            .then(() => {\n                e.target.closest('.posts__item').remove();\n            })\n        }\n    })"],"sourceRoot":""}